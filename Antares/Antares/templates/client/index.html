{% extends "base.html" %}

{% block head %}
<script src='/media/jquery.dataTables.min.js'>
</script>
<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
				$('#listeClient').dataTable( {
					"bProcessing": true,
					"bFilter": false,
					"bServerSide": true,
					"sPaginationType": "full_numbers",
					"sAjaxSource": '/client/ajaxClientList/',
					"oLanguage": {
						"oPaginate": {
							"sFirst": "<<",
							"sLast": ">>",
							"sNext": ">",
							"sPrevious": "<",
						},
						"sEmptyTable": "Pas de client trouvé",
						"sInfo": "Affiche les clients de _START_ à _END_ sur un total de _TOTAL_",
						"sInfoFiltered": "(liste filtrée sur un total de _MAX_ clients)",
						"sLengthMenu": "Affiche _MENU_ clients",
					}
				} );
			} );
			
			function clearForm($form) {
				$form.find('input:text, input:password, input:file, select, textarea').val('');
    			$form.find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');
    			$form.find('input[type=submit]').click();
    		}
				
</script>
{% endblock %}

{% block center %}

<div class="first span-20 border">
	<div class="first span-10 border">
		<h2>Ajouter un Client</h2>
		<form method="POST" action="">{% csrf_token %}
			<table class="formAsTable">
			{{ formAjoutClient.as_table }}
			</table>
			<input type="submit" value="OK" name="ajClient">
		</form>
	</div>
	<div class="span-10 last">
		<h2>Chercher Client</h2>
		<form id="client_formRechercheClient" method="POST" action="">{% csrf_token %}
			<table class="formAsTable">
			{{ formRechercheClient.as_table }}
			</table>
			<input type="submit" value="OK" name="reClient">
			<a onClick="clearForm($('#client_formRechercheClient'));" class="action">Effacer le fitrage</a>
		</form>
	</div>
	<hr>
	
	<h2>Liste <span class="h2info">{{ listeFiltree|yesno:"(filtrée)," }}</span></h2>
	{% if listeFiltree %}<a onClick="clearForm($('#client_formRechercheClient'));" class="action">Effacer le fitrage</a>{% endif %}
	<table id="listeClient" class='tableListing'>
		<thead>
			<tr><th>Code</th><th>Nom / Prénom</th><th>Tèl</th><th>Email</th><th>Actions</th></tr>
		</thead>
		
		<tbody>
			
		</tbody>
	</table>
</div>

<div class="last span-10">
	<div class="span-10">
		<h2>Ajouter un Organisme</h2>
		<form method="POST" action="">{% csrf_token %}
			<table class="formAsTable">
			{{ formAjoutOrganisme.as_table }}
			</table>
			<input type="submit" value="OK" name="ajOrganisme">
		</form>
		<h3>Liste</h3>
		<table class='tableListing'>
			<tr><th>Nom</th><th>Contact</th><th>Actions</th></tr>
			{% for organisme in listeOrganisme %}
			<tr>
				<td>{{ organisme.nom }}</td>
				<td>
					<ul>
						<li>{{ organisme.contact_nom }}</li>
						<li>{{ organisme.contact_tel }}</li>
						<li>{{ organisme.contact_mail }}</li>
					</ul>
				</td>
				<td><a href="" class="action">Modifier</a></td>
			</tr>
			{% endfor %}
		</table>
	</div>
	<hr />
	<div class="span-10 last">
		<h2>Ajouter un Prescripteur</h2>
		<form method="POST" action="">{% csrf_token %}
			<table class="formAsTable">
			{{ formAjoutPrescripteur.as_table }}
			</table>
			<input type="submit" value="OK" name="ajPrescripteur">
		</form>
		<h3>Liste</h3>
		<table class='tableListing'>
			<tr><th>Nom</th><th>Téléphone</th><th>Actions</th></tr>
			{% for prescripteur in listePrescripteur %}
			<tr>
				<td>{{ prescripteur.nom }}</td>
				<td>{{ prescripteur.telephone }}</td>
				<td><a href="" class="action">Modifier</a></td>
			</tr>
			{% endfor %}
		</table>
	</div>
</div>

{% endblock %}